# 第五周周报总结（2022.3.28-2022.4.2）
# 王祥龙
## 课内课程管理功能分析
需要完成课内课程的管理，包括文件压缩上传、新建课程等要求。
## 完成内容
登陆页面的设计
```c++
/**
 * @file main.cpp
 * @author your name (you@domain.com)
 * @brief 主程序
 * @version 0.1
 * @date 2022-03-17
 * 
 * @copyright Copyright (c) 2022
 * 
 */
#include "course.h"
#include <cstring>
bool inputString(char * str);
void writeIn(char * user, char * password, int loginCode);
bool match(char * user, char * password, int loginCode);

int main()
{
    printf("欢迎使用课程辅助系统！请选择登录方式\n1、学生用户\t2、管理员\t3、注册用户\t4、注册管理员");
    int loginCode;
    scanf("%d", &loginCode);getchar();
    char * user = (char *)malloc(sizeof(char) * 21);
    do
    {
        printf("请输入用户名(不能超过20位，中文一个字占2位):");
    } while (!inputString(user));
    char * password = (char *)malloc(sizeof(char) * 21);
    do
    {
        printf("请输入密码(不能超过20位，中文一个字占2位):");
    } while (!inputString(password));
    if((loginCode == 1 || loginCode == 2))
    {
        if(match(user, password, loginCode)) printf("登陆成功！\n");
        else printf("登陆失败！\n");
    }
    else if(loginCode == 3 || loginCode == 4)
    {
        writeIn(user, password, loginCode);
    }
    delete password;
    delete user;
    return 0;
}
void writeIn(char * user, char * password, int loginCode)
{
    try
    {
        FILE * fp;
        if(loginCode == 3) fp = fopen("../database/users.data", "a");
        else fp = fopen("../database/administers.data", "a");
        if(fp == NULL) throw 0;
        if(fprintf(fp, "%s,%s\n", user, password) < 0)
        {
            fclose(fp);
            throw 1;
        }
        fclose(fp);
    }
    catch(int error)
    {
        switch (error)
        {
        case 0:
            printf("Not found the file!\n");
            break;

        case 1:
            printf("Write in error!\n");
        
        default:
            break;
        }
    }
}
bool match(char * user, char * password, int loginCode)
{
    try
    {
        FILE * fp;
        if(loginCode == 1) fp = fopen("../database/users.data", "r");
        else fp = fopen("../database/administers.data", "r");
        if(fp == NULL) throw 0;
        char c;int index = 0;
        char * str = (char *)malloc(50 * sizeof(char));
        char * temp = (char *)malloc(50 * sizeof(char));
        for(int i = 0; i < strlen(user); i++)
        {
            str[i] = user[i];
        }
        str[strlen(user)] = ',';
        for(int i = 0; i < strlen(password); i++)
        {
            str[strlen(user) + i + 1] = password[i];
        }
        while (fscanf(fp, "%s", temp) == 1)
        {
            int i;
            for(i = 0; i < strlen(temp) && str[i] == temp[i]; i++);
            if(i == strlen(temp))
            {
                delete temp;
                delete str;
                fclose(fp);
                return true;
            }
        }
        delete temp;
        delete str;
        fclose(fp);
        return false;
    }
    catch(int error)
    {
        switch (error)
        {
        case 0:
            printf("Not found the file!\n");
            return false;
            break;

        default:
            break;
        }
    }
    return false;
}
bool inputString(char * str)
{
    char c;
    int index = 0;
    try
    {
        while((c = getchar()) != '\n')
        {
            if(index == 20) throw 0;
            str[index++] = c;
        }
    }
    catch(int error)
    {
        switch (error)
        {
        case 0:
            printf("The input exceeds the maximum limit!");
            return false;
            break;
        
        default:
            break;
        }
    }
    return true;
}
```
## 下周计划
继续完成课内课程管理的系统，尝试构建出大体框架


# 刘亮
## 完成课外活动类的基本设计

### 基础要求

学生可以输入课外活动信息，课外活动包括个人活动和集体活动；

- 个人活动可以包括：自习、锻炼、外出等，
- 集体活动可以包括：班会、小组作业、创新创业、聚餐等。

学生可以设定活动闹钟，闹钟可以是一次性的和周期性的，用于活动提醒。
系统可以检测个人活动、集体活动和课程的时间冲突，并给出提示。

### 实现设计

#### 初步类结构设计

```c++
class Time{
private:
    short year, month, day, hr, minute = 0, second = 0;
    short weekday = -1;
};

class Activity {
private:
    Time startTime;
    Time endTime;//活动起止时间
    char *address;
    Student students[32];//涉及到的学生
    bool clk;//闹钟标识，Todo
    char description[128];//活动内容描述
```

#### 初步类方法设计

- 设置活动起止时间时，由基础函数判断是否冲突

```c++
public:
    // Get 和 Set 方法
    const Time &getStartTime() const;

    void setStartTime(const Time &startTime);

    const Time &getEndTime() const;

    void setEndTime(const Time &endTime);

    char *getAddress() const;

    void setAddress(char *address);

    const Student *getStudents() const;

    bool isClk() const;

    void setClk(bool clk);

    const char *getDescription() const;
    
};
```

### 接下来的工作

完成与`Student`类、时间基础类等的设计


# 彭毅林
## 课程导航与模拟系统时间部分的基础设计

### 基础功能
1.课程导航部分：学生向系统输入课程名称、上课时间或者上课地点，系统自动进行路径规划。
2.模拟系统时间：系统依据时钟向前推进，时间精度为小时，且以计算机的10秒作为模拟系统的1小时（可以支持快进）；人机交互时暂停系统时间推进（例如用户输入信息时）；可以通过加入时钟暂停按钮或者命令来实现。

### 高级功能：
规划两地点之间最短距离路线、最短时间路线，途经给定地点的最短路线，导航线路实时推进，查询一定距离内建筑物及其导航信息。

### 实现内容：
学习与路径寻找有关的算法，除去课内学过的BFS、DFS、dijkstra、floyd算法之外，另计划学习蚁群算法和A*算法。

### 蚁群算法类方法基础设计：
```c++
class Ant
{
public:
    Ant();
    void set_abmap() 
    void start();
    void clearAll();
    void shuffle();
    void move();
    void record();
    void record_inall();
    void update();
    void init_ph();
    void init_delta_ph();
    void init_visibility();
    void init_tabu();
    void clear_tabu();

private:
    Priority priority;
};

#endif
```


### 后续计划
下周将学校两个校区的地图大致完善，
